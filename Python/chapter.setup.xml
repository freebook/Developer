<?xml version="1.0" encoding="UTF-8"?>
<chapter id="python.install">
	<title>install</title>
	<section id="python2">
		<title>Python2.x</title>
		<section>
			<title>编译安装</title>
			<para>Python2.x</para>
			<screen>
wget http://www.python.org/ftp/python/2.x.x/Python-2.x.x.tgz
tar zxvf Python-2.x.x.tgz
cd Python-2.x.x
./configure --prefix=/usr/local/python2.x
make
make install

ln -s /usr/local/python/bin/python2.5 /usr/bin/
ln -s /usr/local/python/bin/* /usr/local/bin/
			</screen>
		</section>
		<section>
			<title>Ubuntu 安装</title>
			<screen>
sudo apt-get install python
sudo apt-get install python-setuptools
			</screen>
		</section>
	</section>
	<section id="python3">
		<title>Python3.x</title>
		<section>
			<title>编译安装</title>
			<screen>
			<![CDATA[
./configure --prefix=/usr/local/python-3.1.2
make && make install
			]]>
			</screen>
		</section>
		<section>
			<title>Ubunut 13.04 环境安装python3</title>
			<screen>
$ sudo apt-get install python3
			</screen>
			<para>python 3.3</para>
			<screen>
$ sudo apt-get install python3.3
			</screen>
		</section>
	</section>
	&chapter.pypy.xml;
	<section id="eric">
		<title>Eric Python IDE</title>
		<screen>
apt-get install eric
		</screen>
	</section>
</chapter>
<chapter id="setup">
	<title>Python 包管理</title>
	<section id="setup.py">
		<title>setup.py</title>
		<para>http://docs.python.org/3/install/index.html</para>
		<para>http://docs.python.org/3/distutils/index.html</para>
		<para>创建 setup.py 如下：</para>
		<screen>
# cat setup.py
from distutils.core import setup

setup (
    name = 'firewall',
    version = '1.0.0',
    py_modules = ['firewall'],
    author = 'neo.chen',
    author_email = 'netkiller@msn.com',
    description = 'Module firewall',
    url='http://netkiller.github.io/',
)
		</screen>
		<!-- packages=['distutils', 'distutils.command'], -->
		<para>注意：name和py_modules这两个参数一定要与firewall.py文件名相同，否则发布安装时会发出模块文件找不到的错误.</para>
		<screen>打包操作</screen>
		<screen>
# python setup.py sdist
running sdist
warning: sdist: missing required meta-data: url
warning: sdist: manifest template 'MANIFEST.in' does not exist (using default file list)
warning: sdist: standard file not found: should have one of README, README.txt
writing manifest file 'MANIFEST'
creating firewall-1.0.0
making hard links in firewall-1.0.0...
hard linking firewall.py -> firewall-1.0.0
hard linking setup.py -> firewall-1.0.0
creating dist
tar -cf dist/firewall-1.0.0.tar firewall-1.0.0
gzip -f9 dist/firewall-1.0.0.tar
tar -cf dist/firewall-1.0.0.tar firewall-1.0.0
gzip -f9 dist/firewall-1.0.0.tar
removing 'firewall-1.0.0' (and everything under it)
		</screen>
		<para>sdist 生成的文件</para>
		<screen>
# ll dist/
total 4
-rw-r--r--. 1 root root 2123 Aug  9 12:41 firewall-1.0.0.tar.gz
		</screen>
		<para>安装包</para>
		<screen>
# python setup.py install
running install
running build
running build_py
creating build
creating build/lib
copying firewall.py -> build/lib
running install_lib
copying build/lib/firewall.py -> /usr/lib/python2.6/site-packages
byte-compiling /usr/lib/python2.6/site-packages/firewall.py to firewall.pyc
running install_egg_info
Writing /usr/lib/python2.6/site-packages/firewall-1.0.0-py2.6.egg-info
		</screen>
		<para>安装后</para>
		<screen>
# ll /usr/lib/python2.6/site-packages/firewall*
-rw-r--r--. 1 root root   201 Aug  9 12:42 /usr/lib/python2.6/site-packages/firewall-1.0.0-py2.6.egg-info
-rw-r--r--. 1 root root  6145 Aug  9 11:28 /usr/lib/python2.6/site-packages/firewall.py
-rw-r--r--. 1 root root 11858 Aug  9 12:42 /usr/lib/python2.6/site-packages/firewall.pyc
		</screen>
	</section>
	<section id="distribute">
		<title>distribute</title>
		<para>distribute_setup 是 setuptools 的替代品</para>
		<screen>
$ wget http://python-distribute.org/distribute_setup.py
$ sudo python distribute_setup.py
		</screen>
		<para>或者</para>
		<screen>
curl -sS http://python-distribute.org/distribute_setup.py | python
		</screen>
	</section>
	<section id="pip">
		<title>pip</title>
		<para>使用easy_install安装pip， 同时pip也是easy_install替代品</para>
		<screen>
# easy_install pip
		</screen>
		<para>查询包</para>
		<screen>
$ pip search "Markdown"
		</screen>
		<para>安装包</para>
		<screen>
$ pip install Markdown
		</screen>
		<para>安装特定版本的包， 通过使用 <![CDATA[ ==, >=, <=, >, < ]]>来指定一个版本号。</para>
		<screen>
		<![CDATA[
$ pip install 'Markdown<2.0'
$ pip install 'Markdown>2.0,<2.0.3'
		]]>
		</screen>
		<para>列出安装包的描述信息</para>
		<screen>
$ pip freeze
		</screen>
		<para>升级包, 升级包到当前最新的版本，可以使用-U 或者 --upgrade</para>
		<screen>
# pip install distribute --upgrade
$ pip install -U Markdown
		</screen>
		<para>卸载包</para>
		<screen>
$ pip uninstall Markdown
		</screen>
	</section>
</chapter>